(()=>{"use strict";window.addEventListener("DOMContentLoaded",()=>{(function(){let e=[],t=[],n=[];const a=e=>{const t=e.dataset.id,n=e.value;t?n.length>0?c(e.value,t):r(t):(d(e.value),e.value="")},s=(e,t)=>{const n=`\n                <li>\n                    <div>\n                        <input type="checkbox" data-id="${t.id}" ${t.done?"checked":""}>\n                    </div>\n                    <div class="grow">\n                        <textarea rows="1" data-id="${t.id}">${t.task}</textarea>\n                    </div>\n                    <div>\n                        <a href="#" data-id="${t.id}" class="delete"><i data-lucide="x"></i></a>\n                    </div>\n                </li>`;e.innerHTML+=n},d=t=>{console.log(e),e.push({id:Date.now(),task:t,done:!1}),l()},o=()=>{e=JSON.parse(localStorage.getItem("tasks"))||[],document.querySelector("#opentasks ul").innerHTML="",document.querySelector("#closedtasks ul").innerHTML="",e&&e.length>0?(t=e.filter(e=>!e.done),n=e.filter(e=>e.done),t.length>0?(document.querySelector("#noopentasks").classList.add("hidden"),t.forEach(e=>s(document.querySelector("#opentasks ul"),e))):document.querySelector("#noopentasks").classList.remove("hidden"),n.length>0&&n.forEach(e=>s(document.querySelector("#closedtasks ul"),e))):document.querySelector("#noopentasks").classList.remove("hidden"),lucide.createIcons()},c=(t,n)=>{n=Number(n);const a=e.findIndex(e=>e.id===n);e[a].task=t,l()},i=t=>{t=Number(t);const n=e.findIndex(e=>e.id===t);e[n].done=!e[n].done,l()},r=t=>{t=Number(t),console.log("Delete ",t);const n=e.findIndex(e=>e.id===t);e.splice(n,1),l()},l=()=>{localStorage.setItem("tasks",JSON.stringify(e)),o()};document.addEventListener("click",e=>{const t=e.target.closest("a");t?t.matches(".delete")&&r(t.dataset.id):e.target.matches("input[type=checkbox]")&&i(e.target.dataset.id)}),document.addEventListener("keydown",e=>{if(e.target.matches("textarea")&&"Enter"===e.key)if(e.preventDefault(),e.ctrlKey||e.metaKey){const t=e.target.selectionStart,n=e.target.selectionEnd,a=e.target.value;e.target.value=a.substring(0,t)+"\n"+a.substring(n)}else a(e.target)}),o()})(),document.addEventListener("input",e=>{var t;e.target.matches("textarea")&&((t=e.target).style.height="auto",t.style.height=t.scrollHeight+"px")}),lucide.createIcons()})})();